!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@swimlane/ngx-datatable"),require("queue-typescript"),require("@angular/common"),require("ngx-bootstrap/datepicker")):"function"==typeof define&&define.amd?define("steward-client",["exports","@angular/core","@angular/common/http","rxjs","rxjs/operators","@angular/forms","@swimlane/ngx-datatable","queue-typescript","@angular/common","ngx-bootstrap/datepicker"],t):t(e["steward-client"]={},e.ng.core,e.ng.common.http,e.rxjs,e.rxjs.operators,e.ng.forms,null,null,e.ng.common,null)}(this,function(e,n,o,r,a,i,s,l,c,p){"use strict";var u=function E(){},d=function S(){},t=function(){function e(e,t){this.http=e,this.config=t,this.base_url="/",this.base_url=t.base_url,t.headers?this.headers=t.headers:this.headers=new o.HttpHeaders({"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("access_token")}),t.access_token&&(this.headers=this.headers.append("Authorization","Bearer "+t.access_token)),this.headersPlain=new o.HttpHeaders({"Content-type":"application/x-www-form-urlencoded; charset=utf-8",Authorization:"Bearer "+localStorage.getItem("access_token")})}return e.prototype.post=function(e,t){return this.http.post(this.base_url+e,JSON.stringify(t),{headers:this.headers.append("Content-Type","application/json; charset=utf-8")}).pipe(a.catchError(this.handleError()))},e.prototype.postNoToken=function(e,t){return this.http.post(this.base_url+e,JSON.stringify(t),{headers:new o.HttpHeaders({"Content-Type":"application/json; charset=utf-8"})}).pipe(a.catchError(this.handleError()))},e.prototype.put=function(e,t){return this.http.put(this.base_url+e,JSON.stringify(t),{headers:this.headers.append("Content-Type","application/json; charset=utf-8")}).pipe(a.catchError(this.handleError()))},e.prototype["delete"]=function(e,t){return this.http.request("delete",this.base_url+e,{headers:this.headers.append("Content-Type","application/json; charset=utf-8"),body:JSON.stringify(t)}).pipe(a.catchError(this.handleError()))},e.prototype.get=function(e,t){var n={headers:this.headers,params:this.getHttpParams(t)};return this.http.get(this.base_url+e,n).pipe(a.catchError(this.handleError()))},e.prototype.postFormData=function(e,t,n){var r=new FormData;return Object.keys(t).forEach(function(e){r.append(e,t[e])}),this.headers.get("Authorization")&&!n?n=this.headers:n||(n=new o.HttpHeaders),this.http.post(this.base_url+e,r,{headers:n}).pipe(a.catchError(this.handleError()))},e.prototype.postFormAuthorized=function(e,t,n){return this.http.post(this.base_url+e,t,{headers:this.headersPlain}).pipe(a.catchError(this.handleError()))},e.prototype.postFormDataMultipart=function(e,n){var r=new FormData;return Object.keys(n).forEach(function(t){Array.isArray(n[t])?n[t].forEach(function(e){r.append(t,e)}):r.append(t,n[t])}),this.http.post(this.base_url+e,r,{headers:new o.HttpHeaders({Authorization:"Bearer "+localStorage.getItem("access_token")})}).pipe(a.catchError(this.handleError()))},e.prototype.getHttpParams=function(e){if(e===undefined)return new o.HttpParams;var n=new o.HttpParams;return e.forEach(function(e,t){n=n.append(t,e)}),n},e.prototype.handleError=function(){return function(e){var t=new u;return 500===e.status?(t.code=e.status,t.message="Sorry internal server error occured please try again later"):(t.code=e.status,t.message=e.error.message,t.data=e.error.data),r.of(t)}},e.renderMore=function(e){return"<div class='actions-buttons center' id='"+e+"'><i class='fa fa-check' title='Approve'></i> <i class='fa fa-ban' title='Decline'></i></div>"},e.prototype.intiateDataTable=function(e,t){var n={headers:this.headers,params:this.getHttpParams(t)};return this.http.get(this.base_url+e,n).pipe(a.catchError(this.handleError()))},e.decorators=[{type:n.Injectable}],e.ctorParameters=function(){return[{type:o.HttpClient},{type:d}]},e}(),m=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:n.Component,args:[{selector:"stw-steward-client",template:"\n    <p>\n      steward-client works!\n    </p>\n  ",styles:[]}]}],e.ctorParameters=function(){return[]},e}();function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a["return"])&&n.call(a)}finally{if(o)throw o.error}}return i}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}var f=function H(){this.size=10,this.totalElements=0,this.totalPages=0,this.first=!0,this.last=!1,this.content=[],this.sorted=new b,this.number=0},b=function T(){this.sorted=!1,this.unsorted=!0},y=function A(e,t,n,r,o,a){void 0===r&&(r="fa fa-file-text-o"),void 0===o&&(o=!0),void 0===a&&(a=null),this.placeholder="",this.label=e,this.name=t,this.controlType=n,this.icon=r,this.isRequired=o,this.placeholder=a||e},v=function M(e){void 0===e&&(e="text"),this.type="text",this.type=e,this.minLength=this.min=0,this.maxLength=4e3,this.max=1e9},x=function D(e,t){void 0===e&&(e=5),void 0===t&&(t=1),this.cols=e,this.rows=t,this.maxLength=4e3,this.minLength=0},w=function N(e){this.options=e},F=function P(e,t){void 0===t&&(t=null),this.value=e,this.text=t||e},I=function(){function e(e,t){this.sterwardService=e,this.datePipe=t,this.tableRowHeight=50,this.tableFooterHeight=50,this.tableHeaderHeight=50,this.verticalScrollActive=!1,this.horizontalScrollActive=!1,this.columns=[],this.enableCheckbox=!1,this.enableFilterHeader=!1,this.enableDefaultTableHeader=!1,this.enableSummary=!1,this.summaryPosition="'bottom'",this.summaryHeight="'auto'",this.onActionsEvent=new n.EventEmitter,this.filterComponents=[],this.page=new f,this.selected=[],this.onSelected=new n.EventEmitter,this.filter={}}return e.prototype.ngOnInit=function(){var n={};this.filterComponents.forEach(function(e){var t=[];e.isRequired&&t.push(i.Validators.required),(e.controlType instanceof v||e.controlType instanceof x)&&(t.push(i.Validators.minLength(e.controlType.minLength)),t.push(i.Validators.maxLength(e.controlType.maxLength))),e.controlType instanceof v&&(t.push(i.Validators.max(e.controlType.max)),t.push(i.Validators.min(e.controlType.min))),n[e.name]=new i.FormControl("",t)}),n.from=new i.FormControl("",i.Validators.maxLength(30)),n.to=new i.FormControl("",i.Validators.maxLength(30)),n.needle=new i.FormControl("",i.Validators.maxLength(200)),this.filterForm=new i.FormGroup(n),this.loadPage({offset:0,limit:this.page.size},null)},e.prototype.onActionClick=function(e){this.onActionsEvent.emit(e)},e.prototype.loadPage=function(e,t){var n,r=this;this.endpoint&&(n=t||new Map,this.params&&this.params.forEach(function(e,t){n.set(t,e)}),n.set("page",e.offset),n.set("size",e.limit),this.sterwardService.get(this.endpoint,n).subscribe(function(e){200===e.code&&(r.page=e.data)}))},e.prototype.onSelect=function(e){var t,n=e.selected;console.log("Select Event",n,this.selected),this.selected.splice(0,this.selected.length),(t=this.selected).push.apply(t,g(n)),this.onSelected.emit(this.selected)},e.prototype.onActivate=function(e){},e.prototype.updateFilter=function(e){},e.prototype.processFilter=function(e){var t=new Map(Object.entries(this.filterForm.value));if(this.filterForm.get("from").touched){var n=new Date(this.filterForm.get("from").value);t.set("from",this.datePipe.transform(n,"dd/MM/yyyy"))}else t["delete"]("from");if(this.filterForm.get("to").touched){var r=new Date(this.filterForm.get("to").value);t.set("to",this.datePipe.transform(r,"dd/MM/yyyy"))}else t["delete"]("to");this.loadPage({offset:this.page.number,limit:this.page.size},t)},e.prototype.isInput=function(e){return e instanceof v},e.prototype.isSelect=function(e){return e instanceof w},e.prototype.reset=function(){this.ngOnInit()},e.prototype.isTextArea=function(e){return e instanceof x},e.prototype.summaryFunc=function(e){return""},e.prototype.getFormattedDate=function(e){var t=e.getFullYear(),n=(1+e.getMonth()).toString();n=1<n.length?n:"0"+n;var r=e.getDate().toString();return t+"-"+n+"-"+(r=1<r.length?r:"0"+r)},e.prototype.getFieldValue=function(e,t){var n=t.split("."),r=new(l.Queue.bind.apply(l.Queue,g([void 0],n)));return this.getObjectValue(e,r)},e.prototype.getObjectValue=function(t,n){var r=this;if(!(t instanceof Object)||1===n.length)return t[n.tail];var o=null;return Object.keys(t).forEach(function(e){e===n.front&&t[e]instanceof Object?o=r.getObjectValue(t[e],n):e===n.tail&&(o=t[e])}),o},e.decorators=[{type:n.Component,args:[{selector:"stw-mlk-datatable",template:'<div class="card card-outline-default" *ngIf="enableFilterHeader">\n  <div class="card-body">\n    <form (ngSubmit)="processFilter(filterForm)" [formGroup]="filterForm">\n\n      <div class="row">\n        <div class="col-md-3  mb-3" *ngFor="let control of filterComponents">\n          <label>{{control.label}}: </label>\n          <div class="input-group">\n            <div class="input-group-append">\n                <span class="input-group-text  form-icon-default">\n                  <i [class]="control.icon"></i>\n                </span>\n            </div>\n\n            <select *ngIf="isSelect(control.controlType)" class="form-control form-control-sm checking-field"\n                    [formControlName]="control.name">\n              <option value="" disabled selected>{{control.placeholder}}</option>\n              <option *ngFor="let o of control.controlType.options">{{o.text}}</option>\n            </select>\n\n            <textarea *ngIf="isTextArea(control.controlType)" [cols]="control.controlType.cols"\n                      [rows]="control.controlType.rows" class="form-control form-control-sm checking-field"\n                      [placeholder]="control.placeholder" [formControlName]="control.name"></textarea>\n\n            <input *ngIf="isInput(control.controlType)" [type]="control.controlType.type"\n                   [placeholder]="control.placeholder" class="form-control form-control-sm checking-field"\n                   [formControlName]="control.name"/>\n          </div>\n          <span class="help-block" *ngIf="filterForm.get(control.name).touched">\n              <span class="text-danger"\n                    *ngIf="filterForm.get(control.name).hasError(\'required\')">{{control.placeholder}} is required</span>\n              <span class="text-danger"\n                    *ngIf="filterForm.get(control.name).hasError(\'minlength\')">Minimum of {{control.controlType.minLength}}\n                characters</span>\n              <span class="text-danger"\n                    *ngIf="filterForm.get(control.name).hasError(\'maxlength\')">Maximum of {{control.controlType.maxLength}}\n                characters</span>\n              <span class="text-danger"\n                    *ngIf="filterForm.get(control.name).hasError(\'min\')">Should be greater than {{control.controlType.min}}</span>\n              <span class="text-danger"\n                    *ngIf="filterForm.get(control.name).hasError(\'max\')">Should be less than {{control.controlType.max}}</span>\n            </span>\n        </div>\n      </div>\n\n      <div class="row" *ngIf="enableDefaultTableHeader">\n        <div class="col-md-3 mb-3">\n          <label>From: </label>\n          <div class="input-group">\n            <div class="input-group-append">\n                <span class="input-group-text form-icon-default">\n                  <i class="fa fa-calendar-o"></i>\n                </span>\n            </div>\n            <input\n              type="text"\n              class="form-control form-control-sm checking-field"\n              id="inputFromDate"\n              formControlName="from"\n              placeholder="From..."\n              #dpfrom="bsDatepicker"\n              bsDatepicker\n              [outsideClick]="false"\n              [bsConfig]="{ dateInputFormat: \'DD-MM-YYYY\', containerClass: \'theme-red\' }"\n              maxlength="30"\n              required\n              readonly\n            />\n            <div class="input-group-append">\n              <button class="btn btn-primary" type="button" (click)="dpfrom.toggle()"\n                      [attr.aria-expanded]="dpfrom.isOpen"><i class="fa fa-th"></i></button>\n            </div>\n          </div>\n          <span class="help-block" *ngIf="filterForm.get(\'from\').touched">\n                <span class="text-danger"\n                      *ngIf="filterForm.get(\'from\').hasError(\'maxlength\')">Maximum of 30 characters</span>\n            </span>\n        </div>\n        <div class="col-md-3 mb-3">\n          <label>To: </label>\n          <div class="input-group">\n            <div class="input-group-append">\n                <span class="input-group-text form-icon-default">\n                  <i class="fa fa-calendar-o"></i>\n                </span>\n            </div>\n            <input\n              type="text"\n              class="form-control form-control-sm checking-field"\n              id="inputToDate"\n              formControlName="to"\n              placeholder="To..."\n              #dpto="bsDatepicker"\n              bsDatepicker\n              [outsideClick]="false"\n              [bsConfig]="{ dateInputFormat: \'DD-MM-YYYY\', containerClass: \'theme-red\' }"\n              maxlength="30"\n              required\n              readonly\n            />\n            <div class="input-group-append">\n              <button class="btn btn-primary" type="button" (click)="dpto.toggle()" [attr.aria-expanded]="dpto.isOpen">\n                <i class="fa fa-th"></i></button>\n            </div>\n          </div>\n          <span class="help-block" *ngIf="filterForm.get(\'to\').touched">\n                <span class="text-danger"\n                      *ngIf="filterForm.get(\'to\').hasError(\'maxlength\')">Maximum of 30 characters</span>\n            </span>\n        </div>\n        <div class="col-md-3 mb-3">\n          <label>Search:</label>\n          <div class="input-group">\n            <div class="input-group-prepend">\n                <span class="input-group-text form-icon-default">\n                  <i class="fa fa-search"></i>\n                </span>\n            </div>\n            <input formControlName="needle" class="form-control form-control-sm checking-field" type="text"\n                   placeholder="Search..." (keyup)="updateFilter($event)"/>\n          </div>\n        </div>\n        <span class="help-block" *ngIf="filterForm.get(\'from\').touched">\n              <span class="text-danger"\n                    *ngIf="filterForm.get(\'from\').hasError(\'maxlength\')">Maximum of 200 characters</span>\n          </span>\n      </div>\n\n      <div class="row">\n        <div class="col-md-12">\n          <div class="pull-right inline-buttons">\n            <button class="btn btn-warning btn-sm" type="reset" (click)="reset()">\n              <i class="fa fa-repeat" aria-hidden="true"></i>\n              Reset\n            </button>\n            <button class="btn btn-success btn-sm pull-right" type="submit">\n              <i class="fa fa-filter" aria-hidden="true"></i>\n              Filter\n            </button>\n          </div>\n        </div>\n      </div>\n\n    </form>\n  </div>\n</div>\n\n<ngx-datatable\n  #table\n  [rowHeight]="tableRowHeight"\n  [footerHeight]="tableFooterHeight"\n  [headerHeight]="tableHeaderHeight"\n  [scrollbarV]="verticalScrollActive"\n  [scrollbarH]="horizontalScrollActive"\n  [summaryRow]="enableSummary"\n  [summaryPosition]="summaryPosition"\n  [summaryHeight]="summaryHeight"\n  class="bootstrap"\n  [columnMode]="\'force\'"\n  [rows]="page.content"\n  [selected]="selected"\n  [selectionType]="\'checkbox\'"\n  (activate)="onActivate($event)"\n  (select)=\'onSelect($event)\'\n  [count]="page.totalElements"\n  [offset]="page.number"\n  [externalPaging]="true"\n  [limit]="page.size"\n  (page)="loadPage($event, null)">\n  <ngx-datatable-column [summaryFunc]="summaryFunc" [width]="30" [sortable]="false" [canAutoResize]="false"\n                        [draggable]="true" [resizeable]="false" [headerCheckboxable]="true"\n                        [checkboxable]="true" *ngIf="enableCheckbox">\n  </ngx-datatable-column>\n  <ngx-datatable-column [summaryFunc]="summaryFunc" [width]="30" [sortable]="false" [canAutoResize]="false"\n                        [draggable]="true" [resizeable]="false" [headerCheckboxable]="true"\n                        *ngFor="let c of columns; index as i;">\n    <ng-template let-column="column" ngx-datatable-header-template *ngIf="i==0">\n      <strong>#</strong>\n    </ng-template>\n    <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" *ngIf="i==0">\n        <span>\n            {{rowIndex + 1}}\n        </span>\n    </ng-template>\n  </ngx-datatable-column>\n  <ngx-datatable-column [summaryFunc]="(c.summaryFunc) ? c.summaryFunc : summaryFunc"\n                        [canAutoResize]="(c.canAutoResize) ? c.canAutoResize : true" [name]="c.columnName"\n                        [width]="c.width"\n                        [sortable]="(c.sortable) ? c.sortable : true" [draggable]="(c.draggable) ? c.draggable : true"\n                        [resizeable]="(c.resizeable) ? c.resizeable : true"\n                        *ngFor="let c of columns; index as i;">\n    <ng-template let-column="column" ngx-datatable-header-template *ngIf="i==0">\n      <strong>{{c.columnName}}</strong>\n    </ng-template>\n    <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row" *ngIf="i==0">\n        <span>\n            <ng-container *ngIf="c.isDateColumn; then t10"></ng-container>\n            <ng-container *ngIf="c.isCurrencyColumn && c.currencyText; then t40"></ng-container>\n            <ng-container *ngIf="c.isCurrencyColumn && !c.currencyText; then t70"></ng-container>\n            <ng-container *ngIf="!c.isDateColumn && !c.isCurrencyColumn; then t70"></ng-container>\n\n            <ng-template #t10>\n                {{(getFieldValue(row, c.fieldName) | date:\'medium\')}}\n            </ng-template>\n            <ng-template #t40>\n                {{(getFieldValue(row, c.fieldName) | currency:c.currencyText:\'code\')}}\n            </ng-template>\n            <ng-template #t70>\n                {{getFieldValue(row, c.fieldName)}}\n            </ng-template>\n        </span>\n    </ng-template>\n\n    <ng-template let-column="column" ngx-datatable-header-template>\n      <strong>{{c.columnName}}</strong>\n    </ng-template>\n    <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">\n        <span>\n            <ng-container *ngIf="c.isDateColumn; then t10"></ng-container>\n            <ng-container *ngIf="c.isCurrencyColumn && c.currencyText; then t40"></ng-container>\n            <ng-container *ngIf="c.isCurrencyColumn && !c.currencyText; then t70"></ng-container>\n            <ng-container *ngIf="!c.isDateColumn && !c.isCurrencyColumn; then t70"></ng-container>\n\n            <ng-template #t10>\n                {{(getFieldValue(row, c.fieldName) | date:\'medium\')}}\n            </ng-template>\n            <ng-template #t40>\n                {{(getFieldValue(row, c.fieldName) | currency:c.currencyText:\'code\')}}\n            </ng-template>\n            <ng-template #t70>\n                {{getFieldValue(row, c.fieldName)}}\n            </ng-template>\n        </span>\n    </ng-template>\n  </ngx-datatable-column>\n  <ngx-datatable-column [summaryFunc]="summaryFunc" [name]="moreActions.name" *ngIf="moreActions" [sortable]="false"\n                        [canAutoResize]="false">\n    <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">\n        <span>\n          <div class="input-group-prepend">\n            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown"\n                    aria-haspopup="true"\n                    aria-expanded="false">\n              <i class="fa fa-list-ul" aria-hidden="true"></i>\n            </button>\n            <div class="dropdown-menu">\n              <a class="dropdown-item" *ngFor="let action of moreActions.actions" href="javascript:;"\n                 (click)="onActionClick({id: row[moreActions.idFieldName], actionName: action.actionName, actionRow: row})">{{action.actionName}}</a>\n            </div>\n          </div>\n        </span>\n    </ng-template>\n  </ngx-datatable-column>\n</ngx-datatable>\n',styles:[""]}]}],e.ctorParameters=function(){return[{type:t},{type:c.DatePipe}]},e.propDecorators={tableRowHeight:[{type:n.Input}],tableFooterHeight:[{type:n.Input}],tableHeaderHeight:[{type:n.Input}],verticalScrollActive:[{type:n.Input}],horizontalScrollActive:[{type:n.Input}],columns:[{type:n.Input}],enableCheckbox:[{type:n.Input}],endpoint:[{type:n.Input}],enableFilterHeader:[{type:n.Input}],enableDefaultTableHeader:[{type:n.Input}],enableSummary:[{type:n.Input}],summaryPosition:[{type:n.Input}],summaryHeight:[{type:n.Input}],moreActions:[{type:n.Input}],onActionsEvent:[{type:n.Output}],filterComponents:[{type:n.Input}],params:[{type:n.Input}],onSelected:[{type:n.Output}],table:[{type:n.ViewChild,args:[s.DatatableComponent]}]},e}(),C=function z(e,t,n){this.name="Actions",this.idFieldName="id",this.actions=e,this.name=n,this.idFieldName=t},k=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:d,useValue:e}]}},t.decorators=[{type:n.NgModule,args:[{imports:[i.FormsModule,i.ReactiveFormsModule,s.NgxDatatableModule,c.CommonModule,p.BsDatepickerModule.forRoot(),o.HttpClientModule],declarations:[m,I],exports:[m,I],providers:[c.DatePipe]}]}],t}();e.StewardConfig=d,e.StewardClientService=t,e.StewardClientComponent=m,e.MlkDatatableComponent=I,e.MlkMoreActions=C,e.StewardClientModule=k,e.MlkDynamicControl=y,e.MlkInput=v,e.MlkTextarea=x,e.MlkSelect=w,e.MlkSelectOption=F,e.Page=f,e.Sort=b,e.ResponseWrapper=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=steward-client.umd.min.js.map
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@swimlane/ngx-datatable"),require("@angular/common")):"function"==typeof define&&define.amd?define("steward-client",["exports","@angular/core","@angular/common/http","rxjs","rxjs/operators","@angular/forms","@swimlane/ngx-datatable","@angular/common"],e):e(t["steward-client"]={},t.ng.core,t.ng.common.http,t.rxjs,t.rxjs.operators,t.ng.forms,null,t.ng.common)}(this,function(t,n,r,o,a,s,i,l){"use strict";var c=function F(){},p=function k(){},e=function(){function t(t,e){this.http=t,this.base_url="/",this.base_url=e.base_url,this.headers=new r.HttpHeaders({"Content-Type":"application/json; charset=utf-8"}),e.access_token&&(console.debug("Found access token",e.access_token),this.headers=this.headers.append("Authorization","Bearer "+e.access_token))}return t.prototype.post=function(t,e){return this.http.post(this.base_url+t,JSON.stringify(e),{headers:this.headers}).pipe(a.catchError(this.handleError()))},t.prototype.put=function(t,e){return this.http.put(this.base_url+t,JSON.stringify(e),{headers:this.headers}).pipe(a.catchError(this.handleError()))},t.prototype["delete"]=function(t,e){return this.http.request("delete",this.base_url+t,{headers:this.headers,body:JSON.stringify(e)}).pipe(a.catchError(this.handleError()))},t.prototype.get=function(t,e){var n={headers:this.headers,params:this.getHttpParams(e)};return this.http.get(this.base_url+t,n).pipe(a.catchError(this.handleError()))},t.prototype.getFile=function(t,e){var n={params:this.getHttpParams(e)};return this.http.get(this.base_url+t+"?access_token="+this.token,n).pipe(a.catchError(this.handleError()))},t.prototype.postFormData=function(t,e){var n=new FormData;return Object.keys(e).forEach(function(t){n.append(t,e[t])}),this.http.post(this.base_url+t,n,{headers:new r.HttpHeaders({Authorization:"Bearer "+this.token})}).pipe(a.catchError(this.handleError()))},t.prototype.postFormDataMultipart=function(t,n){var o=new FormData;return Object.keys(n).forEach(function(e){Array.isArray(n[e])?n[e].forEach(function(t){o.append(e,t)}):o.append(e,n[e])}),this.http.post(this.base_url+t,o,{headers:new r.HttpHeaders({Authorization:"Bearer "+this.token})}).pipe(a.catchError(this.handleError()))},t.prototype.putFormDataMultiPart=function(t,n){var o=new FormData;return Object.keys(n).forEach(function(e){Array.isArray(n[e])?n[e].forEach(function(t){o.append(e,t)}):o.append(e,n[e])}),this.http.put(this.base_url+t,o,{headers:new r.HttpHeaders({Authorization:"Bearer "+this.token})}).pipe(a.catchError(this.handleError()))},t.prototype.getHttpParams=function(t){if(t==undefined)return new r.HttpParams;var n=new r.HttpParams;return t.forEach(function(t,e){n=n.append(e,t)}),n},t.prototype.handleError=function(){return function(t){var e=new c;return 500==t.status?(e.code=t.status,e.message="Sorry internal server error occured please try again later"):(e.code=t.status,e.message=t.error.message,e.data=t.error.data),o.of(e)}},t.renderMore=function(t){return"<div class='actions-buttons center' id='"+t+"'><i class='fa fa-check' title='Approve'></i> <i class='fa fa-ban' title='Decline'></i></div>"},t.prototype.intiateDataTable=function(t,e){var n={headers:this.headers,params:this.getHttpParams(e)};return this.http.get(this.base_url+t,n).pipe(a.catchError(this.handleError()))},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:r.HttpClient},{type:p}]},t}(),d=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:n.Component,args:[{selector:"stw-steward-client",template:"\n    <p>\n      steward-client works!\n    </p>\n  ",styles:[]}]}],t.ctorParameters=function(){return[]},t}(),u=function E(){this.size=10,this.totalElements=0,this.totalPages=0,this.first=!0,this.last=!1,this.content=[],this.sorted=new h,this.number=0},h=function I(){this.sorted=!1,this.unsorted=!0},m=function C(t,e,n,o,r,a){void 0===o&&(o="fa fa-file-text-o"),void 0===r&&(r=!0),void 0===a&&(a=null),this.placeholder="",this.label=t,this.name=e,this.controlType=n,this.icon=o,this.isRequired=r,this.placeholder=a||t},f=function A(t){void 0===t&&(t="text"),this.type="text",this.type=t,this.minLength=this.min=0,this.maxLength=4e3,this.max=1e9},g=function M(t,e){void 0===t&&(t=5),void 0===e&&(e=1),this.cols=t,this.rows=e,this.maxLength=4e3,this.minLength=0},b=function S(t){this.options=t},v=function T(t,e){void 0===e&&(e=null),this.value=t,this.text=e||t},y=function(){function t(t){this.sterwardService=t,this.columns=[],this.enableCheckbox=!0,this.onActionsEvent=new n.EventEmitter,this.filterComponents=[],this.page=new u,this.selected=[],this.filter={}}return t.prototype.ngOnInit=function(){var n={};this.filterComponents.forEach(function(t){var e=[];t.isRequired&&e.push(s.Validators.required),(t.controlType instanceof f||t.controlType instanceof g)&&(e.push(s.Validators.minLength(t.controlType.minLength)),e.push(s.Validators.maxLength(t.controlType.maxLength))),t.controlType instanceof f&&(e.push(s.Validators.max(t.controlType.max)),e.push(s.Validators.min(t.controlType.min))),n[t.name]=new s.FormControl("",e)}),n.from=new s.FormControl("",s.Validators.maxLength(100)),n.to=new s.FormControl("",s.Validators.maxLength(100)),n.needle=new s.FormControl("",s.Validators.maxLength(200)),this.filterForm=new s.FormGroup(n),this.loadPage({offset:0,limit:this.page.size},null)},t.prototype.onActionClick=function(t){this.onActionsEvent.emit(t)},t.prototype.loadPage=function(t,e){var n,o=this;this.endpoint&&(n=e||new Map,this.params&&this.params.forEach(function(t,e){n.set(e,t)}),n.set("page",t.offset),n.set("size",t.limit),this.sterwardService.get(this.endpoint,n).subscribe(function(t){200==t.code&&(o.page=t.data)}))},t.prototype.onSelect=function(t){},t.prototype.onActivate=function(t){},t.prototype.updateFilter=function(t){},t.prototype.processFilter=function(t){var e=new Map(Object.entries(this.filterForm.value));this.filterForm.get("from").touched||e["delete"]("from"),this.filterForm.get("to").touched||e["delete"]("to"),this.loadPage({offset:this.page.number,limit:this.page.size},e)},t.prototype.isInput=function(t){return t instanceof f},t.prototype.isSelect=function(t){return t instanceof b},t.prototype.isTextArea=function(t){return t instanceof g},t.prototype.getFormattedDate=function(t){var e=t.getFullYear(),n=(1+t.getMonth()).toString();n=1<n.length?n:"0"+n;var o=t.getDate().toString();return e+"-"+n+"-"+(o=1<o.length?o:"0"+o)},t.decorators=[{type:n.Component,args:[{selector:"stw-mlk-datatable",template:'<div class="card card-outline-default">\n    <div class="card-body">\n      <form (ngSubmit)="processFilter(filterForm)" [formGroup]="filterForm">\n        <div class="row">\n          <div class="col-md-3  mb-3" *ngFor="let control of filterComponents">\n            <label for="from">{{control.label}}: </label>\n            <div class="input-group">\n              <div class="input-group-append">\n                <span class="input-group-text  form-icon-default">\n                  <i [class]="control.icon"></i>\n                </span>\n              </div>\n  \n              <select *ngIf="isSelect(control.controlType)" class="form-control form-control-sm checking-field" [formControlName]="control.name">\n                <option value="" disabled selected>{{control.placeholder}}</option>\n                <option *ngFor="let o of control.controlType.options">{{o.text}}</option>\n              </select>\n  \n              <textarea *ngIf="isTextArea(control.controlType)" [cols]="control.controlType.cols" [rows]="control.controlType.rows" class="form-control form-control-sm checking-field"\n                [placeholder]="control.placeholder" [formControlName]="control.name"></textarea>\n  \n              <input *ngIf="isInput(control.controlType)" [type]="control.controlType.type" [placeholder]="control.placeholder" class="form-control form-control-sm checking-field"\n                [formControlName]="control.name" />\n            </div>\n            <span class="help-block" *ngIf="filterForm.get(control.name).touched">\n              <span class="text-danger" *ngIf="filterForm.get(control.name).hasError(\'required\')">{{control.placeholder}} is required</span>\n              <span class="text-danger" *ngIf="filterForm.get(control.name).hasError(\'minlength\')">Minimum of {{control.controlType.minLength}} characters</span>\n              <span class="text-danger" *ngIf="filterForm.get(control.name).hasError(\'maxlength\')">Maximum of {{control.controlType.maxLength}} characters</span>\n              <span class="text-danger" *ngIf="filterForm.get(control.name).hasError(\'min\')">Should be greater than {{control.controlType.min}}</span>\n              <span class="text-danger" *ngIf="filterForm.get(control.name).hasError(\'max\')">Should be less than {{control.controlType.max}}</span>\n            </span>\n          </div>\n          <div class="col-md-3  mb-3">\n            <label for="from">From: </label>\n            <div class="input-group">\n              <div class="input-group-append">\n                <span class="input-group-text  form-icon-default">\n                  <i class="fa fa-calendar-o"></i>\n                </span>\n              </div>\n              <input type="date" placeholder="From..." class="form-control form-control-sm checking-field"\n                formControlName="from" />\n            </div>\n            <span class="help-block" *ngIf="filterForm.get(\'from\').touched">\n                <span class="text-danger" *ngIf="filterForm.get(\'from\').hasError(\'maxlength\')">Maximum of 100 characters</span>\n            </span>\n          </div>\n          <div class="col-md-3  mb-3">\n            <label for="from">To: </label>\n            <div class="input-group">\n              <div class="input-group-append">\n                <span class="input-group-text  form-icon-default">\n                  <i class="fa fa-calendar-o"></i>\n                </span>\n              </div>\n              <input type="date" placeholder="To..." class="form-control form-control-sm checking-field"\n                formControlName="to" value="" />\n            </div>\n            <span class="help-block" *ngIf="filterForm.get(\'from\').touched">\n                <span class="text-danger" *ngIf="filterForm.get(\'from\').hasError(\'maxlength\')">Maximum of 100 characters</span>\n            </span>\n          </div>\n          <div class="col-md-3 mb-3">\n            <label for="search">Search:</label>\n            <div class="input-group">\n              <div class="input-group-prepend">\n                <span class="input-group-text form-icon-default">\n                  <i class="fa fa-search"></i>\n                </span>\n              </div>\n              <input formControlName="needle" class="form-control form-control-sm checking-field" type="text"\n                placeholder="Search..." (keyup)="updateFilter($event)" />\n            </div>\n          </div>\n          <span class="help-block" *ngIf="filterForm.get(\'from\').touched">\n              <span class="text-danger" *ngIf="filterForm.get(\'from\').hasError(\'maxlength\')">Maximum of 200 characters</span>\n          </span>\n        </div>\n        <div class="row">\n          <div class="col-md-12">\n            <div class="pull-right inline-buttons">\n              <button class="btn btn-secondary btn-sm" type="reset">\n                <i class="fa fa-repeat" aria-hidden="true"></i>\n                Reset\n              </button>\n              <button class="btn btn-primary btn-sm pull-right" type="submit">\n                <i class="fa fa-sort-amount-asc" aria-hidden="true"></i>\n                Filter\n              </button>\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n  \n  <ngx-datatable #table class="bootstrap" [headerHeight]="50" [columnMode]="\'force\'" [footerHeight]="50" [rowHeight]="\'auto\'"\n    [rows]="page.content" [selected]="selected" [selectionType]="\'checkbox\'" (activate)="onActivate($event)" (select)=\'onSelect($event)\'\n    [count]="page.totalElements" [offset]="page.number" [externalPaging]="true" [limit]="page.size" (page)="loadPage($event, null)">\n    <ngx-datatable-column [width]="30" [sortable]="false" [canAutoResize]="false" [draggable]="true" [resizeable]="false" [headerCheckboxable]="true"\n      [checkboxable]="true" *ngIf="enableCheckbox">\n    </ngx-datatable-column>\n    <ngx-datatable-column [canAutoResize]="(c.canAutoResize) ? c.canAutoResize : true" [name]="c.columnName" [width]="c.width"\n      [sortable]="(c.sortable) ? c.sortable : true" [draggable]="(c.draggable) ? c.draggable : true" [resizeable]="(c.resizeable) ? c.resizeable : true"\n      *ngFor="let c of columns">\n      <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">\n        <span>\n            {{(c.isDateColumn)? (row[c.fieldName] | date:\'medium\') : row[c.fieldName]}}\n        </span>\n      </ng-template>\n    </ngx-datatable-column>\n    <ngx-datatable-column [name]="moreActions.name" *ngIf="moreActions" [sortable]="false" [canAutoResize]="false">\n      <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">\n        <span>\n          <div class="input-group-prepend">\n            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true"\n              aria-expanded="false">\n              <i class="fa fa-list-ul" aria-hidden="true"></i>\n            </button>\n            <div class="dropdown-menu">\n              <a class="dropdown-item" *ngFor="let action of moreActions.actions" href="javascript:;" (click)="onActionClick({id: row[moreActions.idFieldName], actionName: action.actionName})">{{action.actionName}}</a>\n              \x3c!-- <a class="dropdown-item" href="#">Another action</a>\n                            <a class="dropdown-item" href="#">Something else here</a>\n                            <div role="separator" class="dropdown-divider"></div>\n                            <a class="dropdown-item" href="#">Separated link</a> --\x3e\n            </div>\n          </div>\n        </span>\n      </ng-template>\n    </ngx-datatable-column>\n    \x3c!-- <ngx-datatable-column name="Description">\n              <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">\n                <span>\n                  {{value}}\n                </span>\n              </ng-template>\n            </ngx-datatable-column>\n            <ngx-datatable-column name="Actions">\n              <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">\n                <span>\n                  {{value}}\n                </span>\n              </ng-template>\n            </ngx-datatable-column> --\x3e\n  </ngx-datatable>',styles:[""]}]}],t.ctorParameters=function(){return[{type:e}]},t.propDecorators={columns:[{type:n.Input}],enableCheckbox:[{type:n.Input}],endpoint:[{type:n.Input}],moreActions:[{type:n.Input}],onActionsEvent:[{type:n.Output}],filterComponents:[{type:n.Input}],params:[{type:n.Input}],table:[{type:n.ViewChild,args:[i.DatatableComponent]}]},t}(),x=function N(t,e,n){this.name="Actions",this.idFieldName="id",this.actions=t,this.name=n,this.idFieldName=e},w=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:p,useValue:t}]}},e.decorators=[{type:n.NgModule,args:[{imports:[s.FormsModule,s.ReactiveFormsModule,i.NgxDatatableModule,l.CommonModule,r.HttpClientModule],declarations:[d,y],exports:[d,y]}]}],e}();t.StewardConfig=p,t.StewardClientService=e,t.StewardClientComponent=d,t.MlkDatatableComponent=y,t.MlkMoreActions=x,t.StewardClientModule=w,t.MlkDynamicControl=m,t.MlkInput=f,t.MlkTextarea=g,t.MlkSelect=b,t.MlkSelectOption=v,t.Page=u,t.Sort=h,t.ResponseWrapper=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=steward-client.umd.min.js.map